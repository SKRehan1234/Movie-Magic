<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Booking Confirmed - Movie Magic</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .success-bg { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Header -->
  <header class="bg-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center space-x-3">
      <div class="bg-gradient-to-r from-purple-500 to-pink-500 p-2 rounded-xl">
        <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v1a1 1 0 01-1 1H3a1 1 0 01-1-1V5a1 1 0 011-1h4zM3 8v11a2 2 0 002 2h14a2 2 0 002-2V8H3z"/>
        </svg>
      </div>
      <div>
        <h1 class="text-xl font-bold text-gray-900">Movie Magic</h1>
        <p class="text-xs text-gray-500">Smart Booking System</p>
      </div>
    </div>
  </header>

  <!-- Confirmation Section -->
  <div class="max-w-2xl mx-auto px-4 py-8">
    <div id="ticket-content" class="bg-white rounded-xl shadow-lg overflow-hidden">
      <!-- Success Message -->
      <div class="success-bg p-6 text-center">
        <svg class="h-14 w-14 text-white mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <h2 class="text-2xl font-bold text-white">Booking Confirmed!</h2>
        <p class="text-green-100">Your ticket has been booked successfully</p>
      </div>

      <!-- Booking ID -->
      <div class="p-4 text-center">
        <p class="text-sm text-gray-600">Booking ID</p>
        <p class="text-lg font-bold text-gray-900">MM-2024-001234</p>
      </div>

      <!-- Movie Details -->
      <div class="p-4 flex space-x-4 bg-gray-50">
        <img id="movie-poster" src="" alt="Movie" class="w-24 h-36 object-cover rounded-md" />
        <div>
          <h3 id="movieTitle" class="text-lg font-bold text-gray-900"></h3>
          <p class="text-sm text-gray-600">Sci-Fi, Adventure, Drama</p>
          <div class="mt-2 text-sm text-gray-600 space-y-1">
            <div><strong>Date:</strong> <span id="movieDate"></span></div>
            <div><strong>Time:</strong> <span id="movieTime"></span></div>
          </div>
        </div>
      </div>

      <!-- Ticket Details -->
      <div class="p-4 space-y-2 text-sm">
        <div class="flex justify-between"><span>Theater:</span><span id="theatre"></span></div>
        <div class="flex justify-between"><span>Seats:</span><span id="seats"></span></div>
        <div class="flex justify-between"><span>Number of Tickets:</span><span id="ticketCount"></span></div>
        <div class="flex justify-between font-bold text-green-600 text-base">
          <span>Total Paid:</span><span id="totalPrice"></span>
        </div>
      </div>

      <!-- QR Code Placeholder -->
      <div class="text-center p-4">
        <div class="bg-gray-200 w-24 h-24 mx-auto rounded flex items-center justify-center text-gray-500">
                 <div class="text-gray-400">
                            <div class="grid grid-cols-8 gap-1">
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                                <div class="w-1 h-1 bg-gray-100"></div>
                                <div class="w-1 h-1 bg-gray-800"></div>
                            </div>
                        </div>
        </div>
        <p class="text-xs text-gray-600 mt-1">Show this code at the theater</p>
      </div>

      <!-- Action Buttons -->
      <div class="p-4 space-y-2">
        <button onclick="downloadTicket()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg font-semibold">
          Download Ticket
        </button>
        <a href="/movies" class="block w-full text-center bg-gray-100 hover:bg-gray-200 py-2 rounded-lg font-semibold text-gray-700">
          Book Another Movie
        </a>
      </div>

      <!-- Important Info -->
      <div class="p-4 bg-yellow-50 text-yellow-800 text-sm rounded-b-lg">
        <p class="font-semibold mb-1">Important Information</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Arrive 15 minutes before showtime</li>
          <li>Carry a valid ID</li>
          <li>No outside food/drinks allowed</li>
          <li>Tickets are non-refundable</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const movieImage = urlParams.get('image') || 'https://via.placeholder.com/64x96.png?text=No+Image';
    document.getElementById('movie-poster').src = decodeURIComponent(movieImage);
    document.getElementById("movieTitle").textContent = decodeURIComponent(urlParams.get("movie") || "Unknown");
    document.getElementById("movieDate").textContent = urlParams.get("date") || "Unknown";
    document.getElementById("movieTime").textContent = urlParams.get("time") || "Unknown";
    document.getElementById("theatre").textContent = urlParams.get("theatre") || "Unknown";
    document.getElementById("seats").textContent = urlParams.get("seats") || "-";
    document.getElementById("ticketCount").textContent = urlParams.get("tickets") || "1";
    document.getElementById("totalPrice").textContent = "â‚¹" + (urlParams.get("price") || "0.00");

    function downloadTicket() {
      const element = document.getElementById('ticket-content');
      const opt = {
        margin: 0,
        filename: 'MovieMagic_Ticket.pdf',
        image: { type: 'jpeg', quality: 1 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'pt', format: 'a4', orientation: 'portrait' },
        pagebreak: { mode: ['avoid-all', 'css'] }
      };
      html2pdf().set(opt).from(element).save();
    }
  </script>
</body>
</html>
